{% load staticfiles compress require %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>{% block meta_title %}{% endblock %} | King's @ London</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  {% compress css %}
  <link rel="stylesheet" href="{% static 'css/foundation.css' %}">
  <link rel="stylesheet" href="{% static 'css/app.css' %}">
  {% endcompress %}
  <link rel="stylesheet" href="{% static 'css/leaflet.css' %}">

   {% compress js %}
  <script src="{% static 'js/leaflet.js' %}">
  {% endcompress %}

</head>
<body>
<section class="main">
    <div class="row">
        <div class="large 12-columns">
            <h3 class="kings-header" >{{ theme.name }}</h3>
            <p><img alt="{{ theme.name }}" height="200" width="100%" src="{{ theme.image.url }}"></p>
            <div class="rich-text">
            <p>
		{{ theme.description|safe }}
            </p>
            </div>
            <div id="map">
            </div>
        </div> <!-- end cols -->
    </div><!-- end row -->
</section>


{% block footer_scripts %}
<script>

var londonMap = L.map("map").setView([51.505, -0.09], 12)

var layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(londonMap);

{% for m in theme.modules.all %}
    {% for l in m.locations.all %}
	L.marker( {{ l.transform }} ).addTo(londonMap)
    {% endfor %}
{% endfor %}



</script>

{% endblock %}

</script>

</body>
</html>
